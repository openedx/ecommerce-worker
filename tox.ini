[tox]
envlist = py{27,35,38},quality
skipsdist = true

[isort]
include_trailing_comma = True
indent = '    '
line_length = 120
multi_line_output = 3

[pytest]
testpaths = tests/
norecursedirs = .* requirements

[testenv]
setenv =
    WORKER_CONFIGURATION_MODULE = ecommerce_worker.configuration.test
deps =
    -r{toxinidir}/requirements/test.txt
    py27: edx-rest-api-client<4.0.0
    py35: edx-rest-api-client==5.2.1
    quality: edx-rest-api-client<4.0.0
commands =
    pytest ecommerce_worker --cov-branch --cov-report=html:build/coverage/html/html/ \
       --cov-report term --cov-report=xml:build/coverage/coverage.xml \
       --cov=ecommerce_worker

[testenv:quality]
commands =
    pep8 --config=.pep8 ecommerce_worker
    pylint --rcfile=pylintrc ecommerce_worker
